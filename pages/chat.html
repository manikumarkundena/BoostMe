<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BoostMe â€“ Chat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <script src="https://unpkg.com/lucide@latest"></script>

    <link rel="stylesheet" href="../styles/modal.css">
    <link rel="stylesheet" href="../styles/global.css">
    <link rel="stylesheet" href="../styles/chat.css">
    <script src="../scripts/ui.js"></script>
    <link rel="icon" type="image/png" href="../assets/images/favicon.png">
    <style>
        /* --- STABLE CENTER BUTTON --- */
.navbar-center-btn {
    width: 44px;
    height: 44px;
    border-radius: 12px; /* Squircle shape looks more modern */
    background: rgba(108, 99, 255, 0.1); /* Subtle purple tint */
    color: #6c63ff;
    border: 1px solid rgba(108, 99, 255, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
}

/* Hover: Purple Glow & Fill */
.navbar-center-btn:hover {
    background: #6c63ff;
    color: white !important;
    box-shadow: 0 4px 15px rgba(108, 99, 255, 0.4);
    transform: translateY(-2px);
}

/* Click: Blue Squeeze Effect */
.navbar-center-btn:active {
    background: #4834d4; /* Deep Blue on click */
    transform: scale(0.92);
    box-shadow: 0 2px 5px rgba(108, 99, 255, 0.2);
}

/* Dark Mode Adjustments */
[data-theme="dark"] .navbar-center-btn {
    background: rgba(255, 255, 255, 0.05);
    color: #a29bfe;
    border-color: rgba(162, 155, 254, 0.2);
}

/* Responsive: Hide text on tiny phones to keep button centered */
@media (max-width: 480px) {
    .hide-mobile { display: none; }
    .navbar-center-btn { width: 38px; height: 38px; }
}
        
    </style>
    </head>

<body>
    <header class="top-bar" style="display: flex; justify-content: space-between; align-items: center; padding: 10px 20px;">
    <div class="top-left" style="flex: 1; display: flex; align-items: center;">
        <img src="../assets/images/boostme-logo.png" class="top-logo">
        <div class="hide-mobile"> <div class="top-app-name">BoostMe</div>
            <div class="top-subtext">Productivity OS</div>
        </div>
    </div>

    <div class="top-center" style="flex: 1; display: flex; justify-content: center;">
        <button id="historyBtn" class="navbar-center-btn" title="View Chat History">
           <i data-lucide="history" width="22"></i>
        </button>
    </div>

    <div class="header-actions" style="flex: 1; display: flex; justify-content: flex-end;">
        <div id="navbar-right"></div>
    </div>
</header>


<main class="page-content">

    <div class="suggestions">
        <button class="chip">Iâ€™m feeling distracted</button>
        <button class="chip">Give me a study tip</button>
        <button class="chip">Boost my mood</button>
    </div>

    <div id="chatBox" class="chat-box">
        <div class="ai-bubble">
            Hey dude ðŸ‘‹<br>
            Iâ€™m BoostMe â€” tell me whatâ€™s up.
        </div>
    </div>

</main>

<audio id="timerSound" src="../assets/sounds/alert.mp3"></audio>


<div class="chat-input-area">
    <button id="chatVoiceBtn" class="icon-btn secondary-icon">
        <span id="voiceStatus"></span>
        <i data-lucide="mic"></i>
    </button>

    <input id="userInput" type="text" placeholder="Type something..." autocomplete="off">

    <button id="sendBtn" class="send-btn">
        <i data-lucide="send-horizontal"></i>
    </button>
</div>


<button class="floating-quick-btn" onclick="manualChallenge()">
    âš¡ Quick Challenge
</button>


<nav class="bottom-nav">
    <a href="home.html" class="nav-item">
        <img src="../assets/icons/home.png" class="nav-icon"><small>Home</small>
    </a>

    <a href="chat.html" class="nav-item active">
        <img src="../assets/icons/chat.png" class="nav-icon"><small>Chat</small>
    </a>

    <a href="focus.html" class="nav-item">
        <img src="../assets/icons/focus.png" class="nav-icon"><small>Focus</small>
    </a>

    <a href="chill.html" class="nav-item">
        <img src="../assets/icons/chill.png" class="nav-icon"><small>Chill</small>
    </a>

    <a href="tools.html" class="nav-item">
        <img src="../assets/icons/tools.png" class="nav-icon"><small>Tools</small>
    </a>
</nav>


<div id="historyModal" class="history-modal">
    <div class="history-content">
        <h2>Your Chat History</h2>

        <div id="historyList" class="history-list">
            </div>

        <div class="history-actions">
            <button id="clearHistoryBtn" class="danger-btn">Clear All History</button>
            <button onclick="closeHistory()" class="close-btn">Close</button>
        </div>
    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="../scripts/config.js"></script>
<script src="../scripts/supabase.js"></script>
<script src="../scripts/navbar.js"></script>
<script src="../scripts/utils.js"></script>
<script src="../scripts/sound.js"></script>
<script src="../scripts/chat.js"></script>

<script>
  lucide.createIcons();
</script>

</body>
</html>