<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BoostMe â€“ Chat</title>
    <script src="https://unpkg.com/lucide@latest"></script>

    <link rel="stylesheet" href="../styles/modal.css">
    <link rel="stylesheet" href="../styles/global.css">
    <link rel="stylesheet" href="../styles/chat.css">
    <script src="../scripts/ui.js"></script>
<link rel="icon" type="image/png" href="../assets/images/favicon.png">
    <style>
        /* --- 1. NAVBAR ADJUSTMENTS --- */
        .top-bar {
            position: relative; /* Needed to center the history button */
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px; /* Adjust as per your global.css */
        }

        /* --- 2. CENTERED HISTORY BUTTON --- */
        .center-nav-btn {
            position: absolute;
            left: 50%;
            transform: translateX(-50%); /* Perfectly Centers it */
            
            /* Styling to match Dashboard Button */
            width: 42px; 
            height: 42px; 
            border-radius: 50%;
            background-color: #f3f4f6; /* Light Gray */
            color: #374151;
            border: none;
            display: flex; 
            align-items: center; 
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        /* Hover Effect */
        .center-nav-btn:hover {
            background-color: #6c63ff; /* Brand Purple */
            color: white;
            transform: translateX(-50%) translateY(-2px); /* Maintain center + lift */
            box-shadow: 0 4px 12px rgba(108, 99, 255, 0.3);
        }

        /* Dark Mode Support */
        [data-theme="dark"] .center-nav-btn {
            background-color: #2d2d2d;
            color: #e0e0e0;
        }
        [data-theme="dark"] .center-nav-btn:hover {
            background-color: #6c63ff;
            color: white;
        }
    </style>
</head>

<body>

<header class="top-bar">
    <div class="top-left">
        <img src="../assets/images/boostme-logo.png" class="top-logo">
        <div>
            <div class="top-app-name">BoostMe</div>
            <div class="top-subtext">Productivity OS</div>
        </div>
    </div>

    <button id="historyBtn" class="center-nav-btn" title="View Chat History">
       <i data-lucide="history" width="22"></i>
    </button>

    <div class="header-actions">
        <div id="navbar-right"></div>
    </div>
</header>


<main class="page-content">

    <div class="suggestions">
        <button class="chip">Iâ€™m feeling distracted</button>
        <button class="chip">Give me a study tip</button>
        <button class="chip">Boost my mood</button>
    </div>

    <div id="chatBox" class="chat-box">
        <div class="ai-bubble">
            Hey dude ðŸ‘‹<br>
            Iâ€™m BoostMe â€” tell me whatâ€™s up.
        </div>
    </div>

</main>

<audio id="timerSound" src="../assets/sounds/alert.mp3"></audio>


<div class="chat-input-area">
    <button id="chatVoiceBtn" class="icon-btn secondary-icon">
        <span id="voiceStatus"></span>
        <i data-lucide="mic"></i>
    </button>

    <input id="userInput" type="text" placeholder="Type something..." autocomplete="off">

    <button id="sendBtn" class="send-btn">
        <i data-lucide="send-horizontal"></i>
    </button>
</div>


<button class="floating-quick-btn" onclick="manualChallenge()">
    âš¡ Quick Challenge
</button>


<nav class="bottom-nav">
    <a href="home.html" class="nav-item">
        <img src="../assets/icons/home.png" class="nav-icon"><small>Home</small>
    </a>

    <a href="chat.html" class="nav-item active">
        <img src="../assets/icons/chat.png" class="nav-icon"><small>Chat</small>
    </a>

    <a href="focus.html" class="nav-item">
        <img src="../assets/icons/focus.png" class="nav-icon"><small>Focus</small>
    </a>

    <a href="chill.html" class="nav-item">
        <img src="../assets/icons/chill.png" class="nav-icon"><small>Chill</small>
    </a>

    <a href="tools.html" class="nav-item">
        <img src="../assets/icons/tools.png" class="nav-icon"><small>Tools</small>
    </a>
</nav>


<div id="historyModal" class="history-modal">
    <div class="history-content">
        <h2>Your Chat History</h2>

        <div id="historyList" class="history-list">
            </div>

        <div class="history-actions">
            <button id="clearHistoryBtn" class="danger-btn">Clear All History</button>
            <button onclick="closeHistory()" class="close-btn">Close</button>
        </div>
    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="../scripts/config.js"></script>
<script src="../scripts/supabase.js"></script>
<script src="../scripts/navbar.js"></script>
<script src="../scripts/utils.js"></script>
<script src="../scripts/sound.js"></script>
<script src="../scripts/chat.js"></script>

<script>
  lucide.createIcons();
</script>

</body>
</html>